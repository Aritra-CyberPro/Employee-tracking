<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Live Map Â· Employee Tracker</title>
  <link rel="icon" href="assets/logo.svg">
  <link rel="stylesheet" href="assets/style.css">
  <link rel="preconnect" href="https://unpkg.com">
  <link rel="preconnect" href="https://cdnjs.cloudflare.com">
</head>
<body>
<div class="app">
  <aside class="sidebar">
    <a class="brand" href="dashboard.html">
      <img src="assets/logo.svg" alt="Logo"><h1>Employee Tracker</h1>
    </a>
    <div class="search-box"><input placeholder="Search..."><button class="btn ghost" onclick="alert('Search demo only')">Go</button></div>
    <nav class="nav">
      <a data-page="dashboard" href="dashboard.html">ğŸ  Dashboard</a>
      <a data-page="employees" href="employees.html">ğŸ‘¥ Employees</a>
      <a data-page="attendance" href="attendance.html">ğŸ•’ Attendance</a>
      <a data-page="locations" href="locations.html">ğŸ“ Live Map</a>
      <a data-page="tasks" href="tasks.html">âœ… Tasks</a>
      <a data-page="reports" href="reports.html">ğŸ“Š Reports</a>
      <a data-page="settings" href="settings.html">âš™ï¸ Settings</a>
    </nav>
    <div style="margin-top:auto">
      <button class="btn ghost" onclick="logout()">Logout</button>
      <p class="footer-note">v1.0 Â· Demo (no backend)</p>
    </div>
  </aside>
  <main class="main">
    <div class="topbar">
      <h2>Live Map</h2>
      <div class="user-mini">
        <span class="badge">Admin</span>
        <img src="https://i.pravatar.cc/60?img=68" alt="U">
      </div>
    </div>
    
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>
<section class="grid cols-2">
  <div class="card">
    <h3>Live Map (Demo)</h3>
    <div id="map"></div>
    <div style="display:flex; gap:10px; margin-top:10px">
      <select id="empSel" class="input"></select>
      <div class="badge">Last update: <span id="lastUpdate">-</span></div>
    </div>
    <p class="small" style="margin-top:10px">This demo uses mock GPS points stored in your browser. Replace with your backend feed for production.</p>
  </div>
  <div class="card">
    <h3>How to make this production-ready</h3>
    <ol style="margin-left:16px; line-height:1.8">
      <li>Replace mock <code>tracks</code> with real device locations from your API.</li>
      <li>Secure login and sessions with a backend (JWT or server sessions).</li>
      <li>Use HTTPS and ask for user consent when tracking.</li>
      <li>Store only what you need. Purge old location data.</li>
      <li>Allow employees to pause sharing outside work hours.</li>
    </ol>
  </div>
</section>
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script>
  window.map = L.map('map').setView([28.6139,77.2090], 12);
  L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', { attribution: '&copy; OpenStreetMap' }).addTo(window.map);
  renderMap();
</script>

  </main>
</div>
<script src="assets/app.js"></script>
<script>initSidebar('locations'); requireAuth();</script>
</body>
</html>